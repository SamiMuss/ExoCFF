{"mappings":"AAAA,aAEA,MAAMA,MAAQC,SAASC,cAAc,UACrCF,MAAMG,UAAY,GAElB,MAAMC,SAAW,KACf,MAAMC,EAAU,IAAIC,eACpBD,EAAQE,KACN,MACA,mFAEFF,EAAQG,OAERH,EAAQI,iBAAiB,QAASC,IAChC,MAAMC,EAAOC,KAAKC,MAAMR,EAAQS,cAChCC,YAAYJ,EAAKK,cACjBC,QAAQC,IAAIP,EAAKK,aAAY,GAC/B,EAGID,YAAeI,IACnB,MAAMC,EAAOD,EACVE,KAAKC,GAEG,uCADMA,EAAQC,KAAKC,UAAUC,OAAO,GAAI,0DAGNH,EAAQI,aAAaJ,EAAQI,oDACzCJ,EAAQK,+BAGtCC,KAAK,IACR5B,MAAM6B,mBAAmB,aAAcT,EAAA,EAGzChB","sources":["app.js"],"sourcesContent":["\"use strict\";\n\nconst board = document.querySelector(\"#board\");\nboard.innerHTML = \"\";\n\nconst getTable = () => {\n  const request = new XMLHttpRequest();\n  request.open(\n    \"GET\",\n    `http://transport.opendata.ch/v1/stationboard?station=Yverdon-les-bains&limit=10`\n  );\n  request.send();\n\n  request.addEventListener(\"load\", (e) => {\n    const data = JSON.parse(request.responseText);\n    renderTable(data.stationboard);\n    console.log(data.stationboard);\n  });\n};\n\nconst renderTable = (table) => {\n  const html = table\n    .map((station) => {\n      const time = station.stop.departure.substr(11, 5);\n      return `<article>\n       <div class=\"time\">${time}</div>\n        <div class=\"category\" data-category=\"${station.category}\">${station.category}</div>\n        <div class=\"destination\">${station.to}</div>\n      </article>`;\n    })\n    .join(\"\");\n  board.insertAdjacentHTML(\"afterbegin\", html);\n};\n\ngetTable();\n\n// Que fait include () en JavaScript? \n\n\n\n// Explication du code :\n\n// Ce code JavaScript utilise les technologies suivantes : DOM (Document Object Model) pour manipuler le contenu HTML, XMLHttpRequest pour effectuer une requête HTTP, et JSON pour traiter les données reçues.\n\n//     La première ligne const board = document.querySelector(\"#board\"); sélectionne l'élément HTML avec l'ID \"board\".\n//     La deuxième ligne board.innerHTML = \"\"; vide le contenu actuel de l'élément \"board\".\n//     La fonction getTable() effectue une requête HTTP GET en utilisant l'objet XMLHttpRequest(). Elle demande les données de la station de train Yverdon-les-bains pour les 10 prochains départs.\n//     Lorsque la réponse est reçue, un événement \"load\" est déclenché et la fonction anonyme associée à ce dernier est appelée. Cette fonction parse les données reçues en utilisant JSON.parse() et appelle la fonction renderTable(data.stationboard) avec les données parsées.\n//     La fonction renderTable(table) prend en entrée les données de la station de train et les traite pour créer du contenu HTML. Elle utilise la méthode map() pour boucler sur les entrées de station et créer une chaîne de caractères pour chaque entrée. Les entrées sont ensuite jointes ensemble avec la méthode join(\"\").\n//     La dernière étape consiste à insérer ce contenu HTML dans l'élément \"board\" en utilisant la méthode insertAdjacentHTML().\n//     La dernière ligne appelle la fonction getTable() pour démarrer le processus.\n\n// Correction prof marche pas :(\n\n// const getStation = (station) => {\n//   const request = new XMLHttpRequest();\n//   request.open(\n//     \"GET\",\n//     `https://transport.opendata.ch/v1/stationboard?station=${\"Yverdon-les-bains\"}&limit=10`\n//   );\n//   request.send();\n//   request.addEventListener(\"load\", () => {\n//     const cleanData = parseData(request.responseText);\n//     cleanData.forEach((train) => {\n//       renderTrain(train);\n//     });\n//   });\n// };\n\n// const parseData = (rawData) => {\n//   const { stationboard } = JSON.parse(rawData);\n//   const cleanData = stationboard.map((el) => {\n//     const date = new Date(el.stop.departure);\n//     const hours = date.getHours();\n//     const minutes = date.getMinutes();\n//     const formattedHours = date.getHours() < 10 ? \"0\" + hours : hours;\n//     const formattedMinutes = date.getMinutes() < 10 ? \"0\" + minutes : minutes;\n//     return {\n//       departure: `${formattedHours}:${formattedMinutes}`,\n//       destination: el.to,\n//       category: el.category\n//     };\n//   });\n//   return cleanData;\n// };\n\n// const renderTrain = (data) => {\n//   const html = `\n//     <article>\n//         <div class=\"time\">${data.departure}</div>\n//         <div class=\"category\" data-category=\"${data.category}\">${data.category}</div>\n//         <div class=\"destination\">${data.destination}</div>\n//     </article>\n//     `;\n//   board.insertAdjacentHTML(\"beforeend\", html);\n// };\n\n// getStation(STATION);"],"names":["board","document","querySelector","innerHTML","getTable","request","XMLHttpRequest","open","send","addEventListener","e","data","JSON","parse","responseText","renderTable","stationboard","console","log","table","html","map","station","stop","departure","substr","category","to","join","insertAdjacentHTML"],"version":3,"file":"index.bcbf540f.js.map"}